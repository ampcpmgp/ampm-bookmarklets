# é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è¿½åŠ æ–¹æ³•ã‚„ãƒ“ãƒ«ãƒ‰æ–¹æ³•ãªã©ã€é–‹ç™ºè€…å‘ã‘ã®æƒ…å ±ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### GitHub Pages ã®æœ‰åŠ¹åŒ–

åˆå›ã®ã¿ã€ãƒªãƒã‚¸ãƒˆãƒªã® Settings > Pages ã§ä»¥ä¸‹ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

- **Source**: GitHub Actions

ã“ã®è¨­å®šã«ã‚ˆã‚Šã€GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒè‡ªå‹•çš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®è¿½åŠ æ–¹æ³•

1. `bookmarklets/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ–°ã—ã„ `.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. æœ€åˆã®5è¡Œã«ã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ã€çµµæ–‡å­—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€æ›´æ–°æ—¥æ™‚ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§è¨˜è¿°
3. ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•çš„ã«ãƒ“ãƒ«ãƒ‰ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã™

### ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®ä¾‹

```javascript
// My Bookmarklet Title
// This is a description of what this bookmarklet does
// ğŸš€
// v1
// 2026-01-27

(function() {
  // Your code here
  alert('Hello!');
})();
```

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®èª¬æ˜

#### çµµæ–‡å­—ï¼ˆ3è¡Œç›®ï¼‰
- ã‚³ãƒ¡ãƒ³ãƒˆã«çµµæ–‡å­—ã‚’è¨˜è¿°ã™ã‚‹ã¨ã€GitHub Pages ã®ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ã«è¡¨ç¤ºã•ã‚Œã¾ã™
- çµµæ–‡å­—ã‚’çœç•¥ã—ãŸå ´åˆã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® ğŸ“ ãŒä½¿ç”¨ã•ã‚Œã¾ã™

#### ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ï¼ˆ4è¡Œç›®ï¼‰
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ï¼ˆv1, v2, v3 ãªã©ï¼‰ã‚’è¨˜è¿°ã—ã¾ã™
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã¯ GitHub Pages ã®ã‚¿ã‚¤ãƒˆãƒ«æ¨ªã«ãƒãƒƒã‚¸ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™
- æ©Ÿèƒ½ã‚’æ›´æ–°ã—ãŸéš›ã¯ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’ä¸Šã’ã‚‹ã“ã¨ã§å¤‰æ›´å±¥æ­´ã‚’ç®¡ç†ã§ãã¾ã™

#### æ›´æ–°æ—¥æ™‚æƒ…å ±ï¼ˆ5è¡Œç›®ï¼‰
- æ›´æ–°æ—¥æ™‚ï¼ˆYYYY-MM-DDå½¢å¼ï¼‰ã‚’è¨˜è¿°ã—ã¾ã™
- æ›´æ–°æ—¥æ™‚ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã¨å…±ã« GitHub Pages ã®ã‚¿ã‚¤ãƒˆãƒ«æ¨ªã«è¡¨ç¤ºã•ã‚Œã¾ã™
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã¨æ›´æ–°æ—¥æ™‚ã‚’åˆ†ã‘ã¦ç®¡ç†ã™ã‚‹ã“ã¨ã§ã€ä¿®æ­£ã®å±¥æ­´ã‚’æ˜ç¢ºã«è¿½è·¡ã§ãã¾ã™

## ãƒ“ãƒ«ãƒ‰

ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹å ´åˆ:

```bash
node build.js
```

`index.html` ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### innerHTML ã®ä½¿ç”¨ç¦æ­¢

ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã§ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã‹ã‚‰ **innerHTML ã®ç›´æ¥ä½¿ç”¨ã‚’ç¦æ­¢** ã—ã¦ã„ã¾ã™ã€‚

#### ç†ç”±

- innerHTML ã¯ XSS (ã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒ†ã‚£ãƒ³ã‚°) æ”»æ’ƒã®ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™
- æœ€è¿‘ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ Trusted Types API ãŒæœ‰åŠ¹ãªå ´åˆã€innerHTML ã¸ã®ä»£å…¥ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
  - ã‚¨ãƒ©ãƒ¼ä¾‹: `Error: Failed to set the 'innerHTML' property on 'Element': This document requires 'TrustedHTML' assignment.`

#### æ¨å¥¨ã•ã‚Œã‚‹ä»£æ›¿æ–¹æ³•

1. **DOM API ã‚’ä½¿ç”¨ã—ãŸå®‰å…¨ãªè¦ç´ ä½œæˆ**
   ```javascript
   // âŒ æ‚ªã„ä¾‹
   element.innerHTML = '<div>' + userInput + '</div>';
   
   // âœ… è‰¯ã„ä¾‹
   const div = document.createElement('div');
   div.textContent = userInput;
   element.appendChild(div);
   ```

2. **ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®æ´»ç”¨**
   ```javascript
   // è¦ç´ ã‚’å®‰å…¨ã«ä½œæˆã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
   function createElementWithText(tag, text, className = '') {
     const element = document.createElement('tag');
     if (className) element.className = className;
     if (text) element.textContent = text;
     return element;
   }
   
   // template è¦ç´ ã‚’ä½¿ã£ãŸ HTML æ§‹é€ ã®ä½œæˆ
   function createElementsFromHTML(htmlString) {
     const template = document.createElement('template');
     template.innerHTML = htmlString;  // template å†…ã§ã¯å®‰å…¨
     return template.content;
   }
   ```

3. **textContent ã¨ appendChild ã®çµ„ã¿åˆã‚ã›**
   ```javascript
   // è¤‡æ•°ã®è¦ç´ ã‚’çµ„ã¿ç«‹ã¦ã‚‹
   const container = document.createElement('div');
   const title = document.createElement('h1');
   title.textContent = 'ã‚¿ã‚¤ãƒˆãƒ«';
   const content = document.createElement('p');
   content.textContent = 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„';
   
   container.appendChild(title);
   container.appendChild(content);
   ```

### ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†

ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚„å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹éš›ã¯ã€å¿…ãšã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

```javascript
// HTML ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é–¢æ•°ã®ä¾‹
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}
```

### Shadow DOM ã®æ´»ç”¨

Shadow DOM ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒšãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚„ JavaScript ã‹ã‚‰éš”é›¢ã•ã‚ŒãŸå®‰å…¨ãªç’°å¢ƒã‚’ä½œæˆã§ãã¾ã™ã€‚

```javascript
const host = document.createElement('div');
const root = host.attachShadow({ mode: 'open' });
// root å†…ã§å®‰å…¨ã« DOM æ“ä½œã‚’è¡Œã†
```
